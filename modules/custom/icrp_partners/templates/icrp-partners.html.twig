<h1>ICRP Partners and Funding Organizations</h1>

<p>
ICRP partners represent a wide range of governmental, public and non-profit cancer research funding organizations from across the world. Our membership includes organizations focused on one type of cancer through to health research organizations supporting research into many cancer types. Partners are full members and provide nominated contact points for ICRP, and vote on any changes to strategic direction or policies.
</p>

<p>
Some funding organizations have joined ICRP as part of a consortium. They enjoy full access to the ICRP partner site, can participate in meetings, analyses and networking. Their data submissions are coordinated by the nominated partner. Former funding organizations (e.g., organizations who have ceased grant funding) whose data is still included in the ICRP database are also listed.
</p>

<p>
    Find out more about our partners and funding organizations using the map below.
</p>

<div class="visible-xs text-right form-group">
    <a href="/partners/export" class="btn btn-default btn-sm">
        <i class="fa fa-download"></i>
        Export
    </a>
</div>

<ul class="nav nav-tabs" id="partner-nav">
    <li role="presentation" class="active">
        <a href="#map" aria-controls="map" role="tab" data-toggle="tab">
            Map
        </a>
    </li>

    <li role="presentation">
        <a href="#partners" aria-controls="partners" role="tab" data-toggle="tab">
            <i style="color: steelblue" class="fas fa-map-marker-alt"></i>
            List of Partners
        </a>
    </li>

    <li role="presentation">
        <a href="#funding-organizations" aria-controls="funding-organizations" role="tab" data-toggle="tab">
            <i style="color: orange" class="fas fa-map-marker-alt"></i>
            List of Funding Orgs
        </a>
    </li>

    {% if logged_in %}
    <li role="presentation">
        <a href="#non-partners" aria-controls="non-partners" role="tab" data-toggle="tab">
            List of Non-Partners
        </a>
    </li>
    {% endif %}

    <li role="presentation" class="pull-right hidden-xs" style="margin: 0;">
        <a href="/partners{{ logged_in ? '/authenticated' : '' }}/export" class="btn btn-default btn-sm" style="margin-right: 0">
            <i class="fa fa-download"></i>
            Export
        </a>
    </li>
</ul>

<div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="map">
        {# <iframe height="600" src="https://www.google.com/maps/d/u/0/embed?mid=1h2KiS71C4FDBVmIOJu35yzcz7gM&z=2" width="100%" style="border: 1px solid #ddd;"></iframe> #}
        <h4>ICRP Partners and Associated Members</h4>
        <div class="form-group">
            <b>Partner</b>
            <select id="select-partner" class="form-control form-control-sm" style="display: inline-block; width: 400px; margin-right: 10px;">
                <option value="">All Partners</option>
                {% for partner in partners %}
                    <option value="{{ partner.SponsorCode}}">{{ partner.Name }}</option>
                {% endfor %}
            </select>
            <label class="cursor-pointer noselect" style="font-weight: normal">
                <input id="exclude-former" type="checkbox" style="margin-right: 5px">
                Exclude Former Partners and Members
            </label>
        </div>

        <div style="height: 600px" id="partner-map">
            <i style="color: #AAA;">Loading Map...</i>
        </div>
    </div>


    <div role="tabpanel" class="tab-pane" id="partners">
        <div style="position: relative; overflow: auto;">
            <table class="table table-bordered table-striped table-condensed table-hover">
                <thead>
                    <tr>
                        <th style="width: 200px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="ICRP member organization. Partners may represent multiple associate organizations">
                            Partner Name
                        </th>

                        <th style="width: 120px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="Abbreviation for the ICRP Partner">
                            Sponsor Code
                        </th>

                        <th style="width: 90px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="Country of the partner organization">
                            Country
                        </th>

                        <th style="width: 120px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="Date of joining ICRP">
                            Join Date
                        </th>

                        <th style="width: 120px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="ICRP Member Status">
                            Status
                        </th>

                        <th
                            data-toggle="tooltip"
                            data-placement="top"
                            title="Description of the goals and activities of the partner">
                            Mission
                        </th>
                    </tr>
                </thead>
                <tbody>
                {% for partner in partners %}
                    <tr>
                        <td title="{{ partner.Name }}">
                            {% if partner.Website %}
                                <a href="{{partner.Website}}" target="_blank">{{ partner.Name }}</a>
                            {% else %}
                                {{ partner.Name }}
                            {% endif %}
                        </td>
                        <td title="{{ partner.SponsorCode }}">{{ partner.SponsorCode }}</td>
                        <td title="{{ partner.Country }}">{{ partner.Country }}</td>
                        <td title="{{ partner.JoinDate }}">{{ partner.JoinDate }}</td>
                        <td title="{{ partner.Status }}">{{ partner.Status }}</td>
                        <td title="{{ partner.Description | striptags }}">{{ partner.Description | raw }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div role="tabpanel" class="tab-pane" id="funding-organizations">
        <div style="position: relative; overflow: auto;">
            <table class="table table-bordered table-striped table-condensed table-hover table-narrow table-nowrap">
                <thead>
                    <tr>
                        <th style="width: 120px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="Full name of the funding organization">
                            Name
                        </th>

                        <th style="width: 90px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="Type of funding organization (Government, Non-Profit, Other)">
                            Type
                        </th>

                        <th style="width: 90px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="ICRP Member Status">
                            Status
                        </th>

                        <th style="width: 90px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="ICRP abbreviation for the funding organization">
                            Abbreviation
                        </th>

                        <th style="width: 90px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="Abbreviation of the partner organization submitting data">
                            Sponsor Code
                        </th>

                        <th style="width: 70px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="ISO 3166-2 Country Code">
                            Country
                        </th>

                        <th style="width: 70px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="Currency in which awards are submitted">
                            Currency
                        </th>

                        <th style="width: 90px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="If NO, funding for the lifetime of the award is complete. If YES, funding is updated annually and investment amounts for future years may not yet be complete">
                            Annualized Funding
                        </th>

                        <th style="width: 90px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="Date on which the most recent import was uploaded to ICRP">
                            Last Import Date
                        </th>

                        <th style="width: 90px"
                            data-toggle="tooltip"
                            data-placement="top"
                            title="Description of the latest upload to ICRP">
                            Import Description
                        </th>
                    </tr>
                </thead>
                <tbody>
                {% for organization in fundingOrganizations %}
                    <tr>
                        <td title="{{ organization.Name }}">{{ organization.Name }}</td>
                        <td title="{{ organization.Type }}">{{ organization.Type }}</td>
                        <td title="{{ organization.MemberStatus }}">{{ organization.MemberStatus }}</td>
                        <td title="{{ organization.Abbreviation }}">{{ organization.Abbreviation }}</td>
                        <td title="{{ organization.SponsorCode }}">{{ organization.SponsorCode }}</td>
                        <td title="{{ organization.Country }}">{{ organization.Country }}</td>
                        <td title="{{ organization.Currency }}">{{ organization.Currency }}</td>
                        <td title="{{ organization.IsAnnualized ? 'YES' : 'NO' }}">{{ organization.IsAnnualized ? 'YES' : 'NO' }}</td>
                        <td title="{{ organization.LastImportDate }}">{{ organization.LastImportDate | split(' ')[0] }}</td>
                        <td title="{{ organization.LastImportDesc }}">{{ organization.LastImportDesc }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    {% if logged_in %}
    <div role="tabpanel" class="tab-pane" id="non-partners">
        Content to be determined
    </div>
    {% endif %}
</div>

<script>window.mapData = {{ mapData | json_encode | raw}}</script>

{# <pre>{{ dump() }}</pre> #}

